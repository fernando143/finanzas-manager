#!/usr/bin/env sh

echo "🔍 Running pre-commit checks..."

# Change to frontend directory
cd frontend || exit 1

echo "📋 Checking for staged frontend files..."

# Check if there are any staged frontend files
STAGED_FRONTEND_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep '^frontend/' || true)

if [ -z "$STAGED_FRONTEND_FILES" ]; then
  echo "ℹ️  No frontend files staged for commit"
  exit 0
fi

echo "📝 Found staged frontend files"

echo "🔧 Running ESLint auto-fix..."
npm run lint:fix

echo "✅ Running ESLint strict check (no warnings allowed)..."
npm run lint:check

echo "🎯 Running TypeScript check..."
npm run type-check

echo "✅ All pre-commit checks passed!"