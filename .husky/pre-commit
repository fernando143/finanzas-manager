#!/usr/bin/env sh

echo "ğŸ” Running pre-commit checks..."

# Change to frontend directory
cd frontend || exit 1

echo "ğŸ“‹ Checking for staged frontend files..."

# Check if there are any staged frontend files
STAGED_FRONTEND_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep '^frontend/' || true)

if [ -z "$STAGED_FRONTEND_FILES" ]; then
  echo "â„¹ï¸  No frontend files staged for commit"
  exit 0
fi

echo "ğŸ“ Found staged frontend files"

echo "ğŸ”§ Running ESLint auto-fix..."
npm run lint:fix

echo "âœ… Running ESLint strict check (no warnings allowed)..."
npm run lint:check

echo "ğŸ¯ Running TypeScript check..."
npm run type-check

echo "âœ… All pre-commit checks passed!"